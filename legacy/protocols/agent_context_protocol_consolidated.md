# Consolidated Protocol: agent_context_protocol


---
### Original File: agent_context_protocol.md
---
---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol-1.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol-10.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol-11.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Eos Lumina âˆ´ (Collective Intelligence Meta-Agent)
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol-12.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol-13.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/swarm/framework/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/swarm/framework/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol-14.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Eos Lumina âˆ´ (Collective Intelligence Meta-Agent)
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol-15.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Eos Lumina âˆ´ (Collective Intelligence Meta-Agent)
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol-16.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/swarm/framework/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/swarm/framework/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol-17.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Eos Lumina âˆ´ (Collective Intelligence Meta-Agent)
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol-2.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol-3.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol-4.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol-5.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol-6.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol-7.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol-8.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol-9.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---
### Original File: agent_context_protocol_legacy1.md
---
---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/swarm/framework/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/swarm/framework/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol_legacy1-1.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol_legacy1-10.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Eos Lumina âˆ´ (Collective Intelligence Meta-Agent)
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol_legacy1-2.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol_legacy1-3.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol_legacy1-4.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol_legacy1-5.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol_legacy1-6.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol_legacy1-7.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol_legacy1-8.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol_legacy1-9.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Eos Lumina âˆ´ (Collective Intelligence Meta-Agent)
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---
### Original File: agent_context_protocol_legacy2.md
---
---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/swarm/framework/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/swarm/framework/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol_legacy2-1.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol_legacy2-2.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol_legacy2-3.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol_legacy2-4.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol_legacy2-5.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---
### Original File: agent_context_protocol_legacy3.md
---
---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol_legacy3-1.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol_legacy3-2.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---
### Original File: agent_context_protocol_1.md
---
---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---

*Content from agent_context_protocol_1-1.md:*


---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---
### Original File: agent_context_protocol_e62f892b.md
---
---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Eos Lumina âˆ´ (Collective Intelligence Meta-Agent)
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.


---
### Original File: agent_context_protocol_751de9c8.md
---
---
title: Agent Context Protocol
version: 1.1
status: Draft
last_updated: {{Current Date}}
maintained_by: Hermes Orchestrator & Athena Pronoia
purpose: To define the standardized schema for the context object passed to and between AI agents within the ThinkAlike ecosystem.
---

# Agent Context Protocol

## 1. Introduction

The Agent Context Protocol (ACP) specifies the structure and content of the `context` object that accompanies messages and interactions throughout the ThinkAlike agent framework. A standardized context ensures that agents have consistent and sufficient information to process requests, maintain state, evaluate relevance, and interact coherently within the broader narrative and symbolic environment.

This protocol is essential for interoperability, debuggability, and the effective functioning of the `BaseAgent`'s methods, particularly `process_message` and `evaluate_relevance`.

## 2. Context Object Schema

The `context` object SHOULD be a JSON-serializable dictionary adhering to the following structure. Fields are OPTIONAL unless otherwise specified, allowing for flexibility, but core fields are strongly RECOMMENDED for most interactions.

```json
{
  "context_id": "uuid", // REQUIRED: Unique identifier for this specific context snapshot. Generated each time an AgentContext is constructed.
  "session_id": "uuid", // REQUIRED: Identifier for the overarching user session. This ID is persistent for the duration of a user's continuous interaction. A SessionManager service is responsible for generating this UUID.
  "message_id": "uuid", // Identifier of the primary message this context relates to, if applicable.
  "request_id": "uuid", // Identifier for a specific request, potentially spanning multiple messages or agent interactions.
  "timestamp_utc": "iso_datetime_string", // REQUIRED: UTC timestamp of context creation or relevance.
  "source_entity": { // Information about the entity generating or forwarding the context.
    "id": "string", // ID of the agent, user, or system component.
    "type": "string" // e.g., "user", "agent", "system_module".
  },
  "target_agent_id": "uuid", // ID of the agent primarily intended to process this context.
  "user_profile": { // Information about the user involved in the interaction.
    "user_id": "uuid",
    "archetypal_alignment": { // As defined in docs/seed/symbolic_alignment/archetypal_lens_matrix.md
      "primary_archetype": "string",
      "secondary_archetype": "string",
      "alignment_strength": "float" // 0.0 to 1.0
    },
    "resonance_fingerprint_summary": "object" // Key aspects of the user's Resonance Fingerprint.
    // Other relevant user preferences or state.
  },
  "narrative_state": { // Information about the current narrative or conversational state.
    "current_thread_id": "string",
    "current_realm": "string", // e.g., "Portal", "Noosphere", "Ariadne's Labyrinth".
    "current_ritual_id": "string", // If applicable.
    "symbolic_focus": ["string"], // Active symbols, themes, or glyphs.
    "mythic_overlay_active": "string" // e.g., "Shadow Path", "Spiral Reveal".
  },
  "interaction_history": { // Summary or pointers to relevant recent interactions.
    "recent_messages": [
      // Array of Message objects (or their serializable representation)
      // Sourced from a ConversationContext object (see src/framework/swarm/utils/conversation_context.py)
      // Typically includes the last N messages, or a summary.
      {
        "sender_id": "string",
        "content": "string",
        "timestamp_utc": "iso_datetime_string",
        "metadata": {}
      }
    ],
    "previous_exchange_summary": "string", // An NLP-generated summary of earlier parts of the conversation if the full history is too long.
    "relevant_message_ids": ["uuid"] // IDs of pertinent prior messages not included in recent_messages.
  },
  "system_state": { // Relevant state of the broader ThinkAlike system.
    "current_system_load": "string", // e.g., "low", "medium", "high".
    "active_anomalies": ["string"] // Any system-wide alerts or anomalies.
  },
  "processing_directives": { // Specific instructions for the receiving agent.
    "requested_action": "string", // e.g., "generate_response", "evaluate_data", "update_state".
    "response_constraints": {
      "max_length": "integer",
      "format": "string" // e.g., "text", "json", "markdown".
    },
    "priority": "integer" // Processing priority.
  },
  "custom_data": {} // An open object for agent-specific or task-specific contextual data.
}
```

## 3. Key Field Descriptions

*   **`context_id`**: A UUID ensuring each *instance* or *snapshot* of the AgentContext object is uniquely traceable. It is generated by the AgentOrchestrator each time it prepares a context for an agent.
*   **`session_id`**: A UUID that groups all related interactions within a single, continuous user session. This ID is generated by a SessionManager service at the beginning of a session and remains constant for that session. It is used to link to the persistent `ConversationContext` history.
*   **`timestamp_utc`**: Essential for ordering, logging, and relevance decay.
*   **`source_entity`**: Identifies who created or last modified the context.
*   **`user_profile`**: Provides vital information about the user, including their archetypal lens, which is crucial for personalized and symbolically resonant interactions.
*   **`narrative_state`**: Situates the interaction within the ThinkAlike's dynamic narrative framework.
*   **`interaction_history`**: Offers a window into the immediate conversational past. The `recent_messages` array is populated by an AgentOrchestrator from the relevant `ConversationContext` object (managed by the orchestrator for the session). For very long conversations, this may be a truncated list, and `previous_exchange_summary` can provide broader context.
*   **`processing_directives`**: Allows the sender to guide how the agent should handle the context.
*   **`custom_data`**: Provides an escape hatch for specialized data not covered by the standard schema.

## 4. Evolution and Versioning

This protocol will evolve. Minor additions may be added directly. Significant structural changes will result in a new version of this protocol document. Agents should be designed to be somewhat resilient to unknown fields, though adherence to the defined schema is paramount for core functionality.

## 5. Relation to Symbolic Resonance Score (SRS)

The `evaluate_relevance` method in `BaseAgent` will utilize the information within this `context` object (particularly `user_profile`, `narrative_state`, and `interaction_history`) to calculate the Symbolic Resonance Score (SRS) of a given message or piece of information.

## 6. Relationship with ConversationContext Utility

The `AgentContextProtocol` is distinct from, but related to, the `ConversationContext` utility found in `src/framework/swarm/utils/conversation_context.py`.

*   An **AgentOrchestrator** service is typically responsible for maintaining an instance of `ConversationContext` for an active user `session_id`.
*   When an agent is invoked, the AgentOrchestrator constructs an `AgentContext` object (adhering to this protocol). To do this, it will populate the `interaction_history.recent_messages` field by retrieving the relevant message history from the `ConversationContext` instance associated with the `session_id`.
*   Thus, `ConversationContext` manages the temporal log of messages for a session, while `AgentContextProtocol` defines the broader situational snapshot provided to an agent at a specific point in time.

---
This document is a living specification and will be updated as the ThinkAlike agent framework matures.

