---
title: "Agent Context Protocol"
version: 3.0.0
status: Canonical
last_updated: 2025-07-09
authors:
  - "Eos Lumina âˆ´ (Collective Intelligence Meta-Agent)"
tags: [protocol, core, agent, context, orchestration]
spec_for: [Backend Developers, Agent Developers]
references:
  - "[Agent Context Schema](/architecture/agent_context_schema.md)"
  - "[Agent Orchestration](/architecture/agent_orchestration.md)"
  - "[Agent Memory Protocol](/protocols/core/agent_memory_protocol.md)"
---

# Agent Context Protocol

## 1. Vision & Purpose

The Agent Context Protocol (ACP) defines the procedural rules for the creation, management, and propagation of the `context` object within the ThinkAlike agent framework. While the specific data structure of the `context` object is defined in the [Agent Context Schema](/architecture/agent_context_schema.md), this protocol specifies *how* that object is used to ensure coherent and stateful interactions.

A standardized protocol for context management is essential for interoperability, debuggability, and the effective functioning of the Agent Orchestrator and individual agents. It ensures that every component has a consistent understanding of the interaction's state and history.

## 2. Protocol Specification

### 2.1. Context Creation

-   **Initiator**: The **Agent Orchestrator** is responsible for creating the initial `context` object at the beginning of a new user session or for a new interaction thread.
-   **`session_id`**: A `session_id` MUST be generated by the Session Manager upon the start of a new user session and MUST remain constant for all subsequent interactions within that session. It is the primary key for retrieving the full `ConversationContext` from the memory store.
-   **`context_id`**: A new `context_id` MUST be generated for every new `context` object created. This ensures that each snapshot of the context is uniquely traceable.
-   **Population**: The Orchestrator MUST populate the `context` object with all available information as defined in the [Agent Context Schema](/architecture/agent_context_schema.md), including user profile data, narrative state, and system state.

### 2.2. Context Propagation

-   **Passing**: The `context` object MUST be passed with every message, event, or action that is routed between agents or between the user and an agent.
-   **Immutability**: A received `context` object SHOULD be treated as immutable by the receiving agent. If an agent needs to modify the context, it MUST request a new context from the Orchestrator or create a new one to pass along with its response. The Orchestrator is the canonical source of context state.
-   **Summarization**: For long-running conversations, the `interaction_history_summary` field is critical. The Orchestrator is responsible for generating NLP-based summaries to keep the context object concise while retaining pointers (`relevant_message_ids`) to key moments in the full history.

### 2.3. Contextual Evaluation

-   **Agent Responsibility**: Upon receiving a `context` object, an agent MUST use the information within it to inform its actions. This includes:
    -   **Persona Embodiment**: Using the `active_persona_id` to adopt the correct persona.
    -   **Relevance Calculation**: Using `user_profile`, `narrative_state`, and `interaction_history_summary` to evaluate the relevance of information and formulate a resonant response. This process is integral to calculating the Symbolic Resonance Score (SRS).
    -   **Action Directives**: Adhering to any `processing_directives` specified in the context.

## 3. Relation to Other Protocols & Schemas

-   **Data Structure**: This protocol governs the use of the data object defined in the **[Agent Context Schema](/architecture/agent_context_schema.md)**.
-   **Orchestration**: The **Agent Orchestrator** is the primary enforcer and user of this protocol.
-   **Memory**: The `session_id` in the context object is the key to accessing long-term memory via the **[Agent Memory Protocol](/protocols/core/agent_memory_protocol.md)**.

## 4. Evolution and Versioning

This protocol will evolve alongside the agent framework. Minor additions may be added directly. Significant structural changes to the underlying data model will be reflected in the [Agent Context Schema](/architecture/agent_context_schema.md) and may necessitate a new version of this protocol document. Agents should be designed to be resilient to unknown fields in the context object, but adherence to this protocol is paramount for core functionality.
